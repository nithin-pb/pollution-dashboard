(this["webpackJsonppollution-information"]=this["webpackJsonppollution-information"]||[]).push([[0],{118:function(e,t,a){},126:function(e,t,a){},131:function(e,t,a){},132:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(34),c=a.n(o),i=(a(98),a(6)),s=a(5),u=a(35),l=a.n(u),d=a(51),p=a(18),j=a(145),b=a(155),f=a(68),h=a.n(f),m=a(67),O=a.n(m);function x(e){return"".concat("https://docs.openaq.org","/").concat("v2","/").concat(e)}var g={pollutionData:function(){return{getLocations:function(e){return O.a.get(x("cities"),{params:e})},getPollutionData:function(e){return O.a.get(x("measurements"),{params:e})}}}},v=(a(118),a(2));function y(e){var t=Object(p.a)({},e),a=t.onDateChange,r=t.onLocationChange,o=Object(n.useState)({ready:!1,loading:!0,error:!1}),c=Object(s.a)(o,2),i=(c[0],c[1]),u=Object(n.useState)([]),f=Object(s.a)(u,2),m=f[0],O=f[1],x=Object(j.a)({options:m,onChange:r,getOptionLabel:function(e){return e}}),y=x.getRootProps,S=x.getInputProps,w=x.getListboxProps,Y=x.getOptionProps,k=x.groupedOptions;Object(n.useEffect)((function(){N().then()}),[]);var N=function(){var e=Object(d.a)(l.a.mark((function e(){var t,a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i({ready:!1,loading:!0,error:!1}),t={limit:300,page:1,offset:0,sort:"asc",order_by:"city",country:"IN"},e.next=5,g.pollutionData().getLocations(t);case 5:a=e.sent,n=a.data.results,O(C(n)),i({ready:!0,loading:!1,error:!1}),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(0);case 13:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),C=function(e){return e.map((function(e){return e.city}))};return Object(v.jsxs)(b.a,{className:"location-search",children:[Object(v.jsxs)("div",Object(p.a)(Object(p.a)({},y()),{},{className:"search-wrapper",children:[Object(v.jsx)("input",Object(p.a)(Object(p.a)({},S()),{},{placeholder:"Search location from India",className:k.length>0?"input-selected input":"input"})),Object(v.jsx)(h.a,{color:"action",className:"search-icon"}),Object(v.jsx)("div",{className:"date-picker-wrapper",children:Object(v.jsx)(D,{onDateChange:a})})]})),k.length>0?Object(v.jsx)("ul",Object(p.a)(Object(p.a)({},w()),{},{children:k.map((function(e,t){return Object(v.jsxs)("li",Object(p.a)(Object(p.a)({},Y({option:e,index:t})),{},{children:[Object(v.jsx)(h.a,{color:"action"}),e]}))}))})):null]})}a(126);function D(e){var t=Object(p.a)({},e).onDateChange;return Object(v.jsx)("input",{type:"date",max:(new Date).toISOString().split("T")[0],className:"date-picker-input","data-date-inline-picker":"true",onChange:t})}var S=a(153),w=a(156),Y=a(151),k=a(157),N=a(158),C=a(87),M=a.n(C),H={series:[],options:{chart:{height:350,fontfamilty:"Roboto",toolbar:{show:!1},zoom:{autoScaleYaxis:!0}},plotOptions:{bar:{horizontal:!1,columnWidth:"55%",endingShape:"rounded"}},dataLabels:{enabled:!1},xaxis:{type:"time",tickAmount:20},stroke:{show:!0,width:2},yaxis:{},fill:{opacity:1}}},I=a(54),L=a(28),P=a.n(L);function A(e){return e?{startDate:P()(e,"YYYY-MM-DD").format("YYYY-MM-DDT00:00:00+00:00"),endDate:P()(e,"YYYY-MM-DD").format("YYYY-MM-DDT23:59:00+00:00")}:null}function T(e,t){if(!Array.isArray(e)||e.length<1)return{axis:[],data:[]};var a=[],n=[];"All"!==t&&a.push({name:t,data:[]});var r,o=Object(I.a)(e);try{var c=function(){var e=r.value,o=a.some((function(t){return t.name===e.parameter}));if(n.some((function(t){return t===P()(e.date.utc).format("HH:mm")}))||n.push(P()(e.date.utc).format("HH:mm")),"All"===t)if(o){var c=a.findIndex((function(t){return t.name===e.parameter}));a[c].data.push({x:P()(e.date.utc).format("h:mm"),y:e.value})}else a.push({name:e.parameter,data:[{x:P()(e.date.utc).format("HH:mm"),y:e.value}]});else e.parameter===t&&a[0].data.push({x:P()(e.date.utc).format("HH:mm"),y:e.value})};for(o.s();!(r=o.n()).done;)c()}catch(i){o.e(i)}finally{o.f()}return{axis:n,data:a}}var B={width:"100%",maxWidth:1200,margin:"auto",marginTop:8,p:2,pt:1,pl:0,borderRadius:2},E={p:2,pt:2,pl:3,pb:1};function J(e){var t=Object(p.a)({},e),a=t.location,r=t.date,o=Object(n.useState)(null),c=Object(s.a)(o,2),i=c[0],u=c[1],j=Object(n.useState)(0),f=Object(s.a)(j,2),h=f[0],m=f[1],O=Object(n.useState)([]),x=Object(s.a)(O,2),y=x[0],D=x[1],C=Object(n.useState)({loading:!0,ready:!1,error:!1}),I=Object(s.a)(C,2),L=I[0],P=I[1],J=function(){var e=Object(d.a)(l.a.mark((function e(){var t,n,o,c,i,s,d,p;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,P({loading:!0,ready:!1,error:!1}),t=A(r)||{startDate:null,endDate:null},n=t.startDate,o=t.endDate,c={city:a,date_from:n,date_to:o,offset:0,order_by:"datetime",page:1,radius:1e3,sort:"desc",entity:"government",limit:1e5,sensorType:"reference grade"},e.next=6,g.pollutionData().getPollutionData(c);case 6:i=e.sent,s=i.data.results,D(JSON.parse(JSON.stringify(s))),d=T(s,_[h])||{axis:null,data:null},p=d.data,H.series=p||[],u(H),P({loading:!1,ready:!0,error:!1}),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),P({loading:!0,ready:!1,error:!0});case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){a&&r&&J().then()}),[a,r]),Object(n.useEffect)((function(){P({loading:!0,ready:!1,error:!1}),u(null);var e=(T(y,_[h])||{axis:null,data:null}).data;H.series=e||[],u(H),setTimeout((function(){P({loading:!1,ready:!0,error:!1})}),2e3)}),[h]),Object(v.jsx)(b.a,{width:"100%",children:Object(v.jsx)(S.a,{in:Boolean(a&&r),children:Object(v.jsxs)(w.a,{style:{boxShadow:"var(--pd-shadow-1)"},sx:B,elevation:0,children:[Object(v.jsx)(Y.a,{"aria-label":"basic tabs example",value:h,onChange:function(e,t){return m(t)},children:_.map((function(e,t){return Object(v.jsx)(k.a,{label:e},t)}))}),Object(v.jsxs)(w.a,{sx:E,elevation:0,children:[L.loading&&Object(v.jsx)(N.a,{size:24}),L.ready&&Object(v.jsx)(M.a,{options:i.options||{},series:i.series||[],type:"line",height:400})]})]})})})}var _=["co","o3","pm10","pm25","so2","no2","All"],z=(a(131),a(159));function R(){var e=Object(n.useState)(""),t=Object(s.a)(e,2),a=t[0],r=t[1],o=Object(n.useState)(""),c=Object(s.a)(o,2),i=c[0],u=c[1],l=Boolean(a&&i);return Object(v.jsx)("div",{className:"dashboard-wrapper dashboard-properties",children:Object(v.jsxs)("div",{className:l?"dashboard-properties":"dashboard-visual-aligner dashboard-properties",children:[Object(v.jsx)(z.a,{variant:"h4",gutterBottom:!0,sx:{mb:3,fontWeight:600},align:"center",color:"textSecondary",children:"Pollution Information"}),Object(v.jsx)(y,{onDateChange:function(e){r(e.target.value)},onLocationChange:function(e,t){u(t)}}),Object(v.jsx)(J,{date:a,location:i})]})})}function W(){return Object(v.jsx)(i.c,{children:Object(v.jsx)(i.a,{path:"/",element:Object(v.jsx)(R,{})})})}var q=a(65);var F=function(){return Object(v.jsx)(q.a,{basename:"/pollution-dashboard",children:Object(v.jsx)(W,{})})};c.a.render(Object(v.jsx)(r.a.StrictMode,{children:Object(v.jsx)(F,{})}),document.getElementById("root"))},98:function(e,t,a){}},[[132,1,2]]]);
//# sourceMappingURL=main.03b72706.chunk.js.map