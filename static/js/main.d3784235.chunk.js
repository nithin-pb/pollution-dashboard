(this["webpackJsonppollution-information"]=this["webpackJsonppollution-information"]||[]).push([[0],{118:function(t,e,a){},126:function(t,e,a){},131:function(t,e,a){},132:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),o=a(34),c=a.n(o),i=(a(98),a(6)),s=a(5),u=a(35),l=a.n(u),d=a(51),p=a(18),j=a(145),b=a(155),f=a(68),h=a.n(f),m=a(67),O=a.n(m);function x(t){return"".concat("https://docs.openaq.org","/").concat("v2","/").concat(t)}var g={pollutionData:function(){return{getLocations:function(t){return O.a.get(x("cities"),{params:t})},getPollutionData:function(t){return O.a.get(x("measurements"),{params:t})}}}},v=(a(118),a(2));function y(t){var e=Object(p.a)({},t),a=e.onDateChange,r=e.onLocationChange,o=Object(n.useState)({ready:!1,loading:!0,error:!1}),c=Object(s.a)(o,2),i=(c[0],c[1]),u=Object(n.useState)([]),f=Object(s.a)(u,2),m=f[0],O=f[1],x=Object(j.a)({options:m,onChange:r,getOptionLabel:function(t){return t}}),y=x.getRootProps,S=x.getInputProps,w=x.getListboxProps,Y=x.getOptionProps,k=x.groupedOptions;Object(n.useEffect)((function(){N().then()}),[]);var N=function(){var t=Object(d.a)(l.a.mark((function t(){var e,a,n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,i({ready:!1,loading:!0,error:!1}),e={limit:300,page:1,offset:0,sort:"asc",order_by:"city",country:"IN"},t.next=5,g.pollutionData().getLocations(e);case 5:a=t.sent,n=a.data.results,O(C(n)),i({ready:!0,loading:!1,error:!1}),t.next=13;break;case 11:t.prev=11,t.t0=t.catch(0);case 13:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(){return t.apply(this,arguments)}}(),C=function(t){return t.map((function(t){return t.city}))};return Object(v.jsxs)(b.a,{className:"location-search",children:[Object(v.jsxs)("div",Object(p.a)(Object(p.a)({},y()),{},{className:"search-wrapper",children:[Object(v.jsx)("input",Object(p.a)(Object(p.a)({},S()),{},{placeholder:"Search location from India",className:k.length>0?"input-selected input":"input"})),Object(v.jsx)(h.a,{color:"action",className:"search-icon"}),Object(v.jsx)("div",{className:"date-picker-wrapper",children:Object(v.jsx)(D,{onDateChange:a})})]})),k.length>0?Object(v.jsx)("ul",Object(p.a)(Object(p.a)({},w()),{},{children:k.map((function(t,e){return Object(v.jsxs)("li",Object(p.a)(Object(p.a)({},Y({option:t,index:e})),{},{children:[Object(v.jsx)(h.a,{color:"action"}),t]}))}))})):null]})}a(126);function D(t){var e=Object(p.a)({},t).onDateChange;return Object(v.jsx)("input",{type:"date",max:(new Date).toISOString().split("T")[0],className:"date-picker-input","data-date-inline-picker":"true",onChange:e})}var S=a(153),w=a(156),Y=a(151),k=a(157),N=a(158),C=a(87),M=a.n(C),H={series:[],options:{chart:{height:350,fontfamilty:"Roboto",toolbar:{show:!1},zoom:{autoScaleYaxis:!0}},plotOptions:{bar:{horizontal:!1,columnWidth:"55%",endingShape:"rounded"}},dataLabels:{enabled:!1},xaxis:{type:"time",tickAmount:20},stroke:{show:!0,width:2},yaxis:{},fill:{opacity:1}}},I=a(54),L=a(28),P=a.n(L);function A(t){return t?{startDate:P()(t,"YYYY-MM-DD").format("YYYY-MM-DDT00:00:00+00:00"),endDate:P()(t,"YYYY-MM-DD").format("YYYY-MM-DDT23:59:00+00:00")}:null}function T(t,e){if(!Array.isArray(t)||t.length<1)return{axis:[],data:[]};var a=[],n=[];"All"!==e&&a.push({name:e,data:[]});var r,o=Object(I.a)(t);try{var c=function(){var t=r.value,o=a.some((function(e){return e.name===t.parameter}));if(n.some((function(e){return e===P()(t.date.utc).format("HH:mm")}))||n.push(P()(t.date.utc).format("HH:mm")),"All"===e)if(o){var c=a.findIndex((function(e){return e.name===t.parameter}));a[c].data.push({x:P()(t.date.utc).format("h:mm"),y:t.value})}else a.push({name:t.parameter,data:[{x:P()(t.date.utc).format("HH:mm"),y:t.value}]});else t.parameter===e&&a[0].data.push({x:P()(t.date.utc).format("HH:mm"),y:t.value})};for(o.s();!(r=o.n()).done;)c()}catch(i){o.e(i)}finally{o.f()}return{axis:n,data:a}}var E={width:"100%",maxWidth:1200,margin:"auto",marginTop:8,p:2,pt:1,pl:0,borderRadius:2},J={p:2,pt:2,pl:3,pb:1};function _(t){var e=Object(p.a)({},t),a=e.location,r=e.date,o=Object(n.useState)(null),c=Object(s.a)(o,2),i=c[0],u=c[1],j=Object(n.useState)(0),f=Object(s.a)(j,2),h=f[0],m=f[1],O=Object(n.useState)([]),x=Object(s.a)(O,2),y=x[0],D=x[1],C=Object(n.useState)({loading:!0,ready:!1,error:!1}),I=Object(s.a)(C,2),L=I[0],P=I[1],_=function(){var t=Object(d.a)(l.a.mark((function t(){var e,n,o,c,i,s,d,p;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,P({loading:!0,ready:!1,error:!1}),e=A(r)||{startDate:null,endDate:null},n=e.startDate,o=e.endDate,c={city:a,date_from:n,date_to:o,offset:0,order_by:"datetime",page:1,radius:1e3,sort:"desc",entity:"government",limit:1e5,sensorType:"reference grade"},t.next=6,g.pollutionData().getPollutionData(c);case 6:i=t.sent,s=i.data.results,D(JSON.parse(JSON.stringify(s))),d=T(s,z[h])||{axis:null,data:null},p=d.data,H.series=p||[],u(H),P({loading:!1,ready:!0,error:!1}),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(0),P({loading:!0,ready:!1,error:!0});case 18:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(){return t.apply(this,arguments)}}();return Object(n.useEffect)((function(){a&&r&&_().then()}),[a,r]),Object(n.useEffect)((function(){P({loading:!0,ready:!1,error:!1}),u(null);var t=(T(y,z[h])||{axis:null,data:null}).data;H.series=t||[],u(H),setTimeout((function(){P({loading:!1,ready:!0,error:!1})}),2e3)}),[h]),Object(v.jsx)(b.a,{width:"100%",children:Object(v.jsx)(S.a,{in:Boolean(a&&r),children:Object(v.jsxs)(w.a,{style:{boxShadow:"var(--pd-shadow-1)"},sx:E,elevation:0,children:[Object(v.jsx)(Y.a,{"aria-label":"basic tabs example",value:h,onChange:function(t,e){return m(e)},children:z.map((function(t,e){return Object(v.jsx)(k.a,{label:t},e)}))}),Object(v.jsxs)(w.a,{sx:J,elevation:0,children:[L.loading&&Object(v.jsx)(N.a,{size:24}),L.ready&&Object(v.jsx)(M.a,{options:i.options||{},series:i.series||[],type:"line",height:400})]})]})})})}var z=["co","o3","pm10","pm25","so2","no2","All"],B=(a(131),a(159));function R(){var t=Object(n.useState)(""),e=Object(s.a)(t,2),a=e[0],r=e[1],o=Object(n.useState)(""),c=Object(s.a)(o,2),i=c[0],u=c[1];return Object(v.jsxs)("div",{className:"dashboard-wrapper",children:[Object(v.jsx)(B.a,{variant:"h4",gutterBottom:!0,sx:{mb:3,fontWeight:600},color:"textSecondary",children:" Pollution Information"}),Object(v.jsx)(y,{onDateChange:function(t){r(t.target.value)},onLocationChange:function(t,e){u(e)}}),Object(v.jsx)(_,{date:a,location:i})]})}function W(){return Object(v.jsx)(i.c,{children:Object(v.jsx)(i.a,{path:"/",element:Object(v.jsx)(R,{})})})}var q=a(65);var F=function(){return Object(v.jsx)(q.a,{children:Object(v.jsx)(W,{})})};c.a.render(Object(v.jsx)(r.a.StrictMode,{children:Object(v.jsx)(F,{})}),document.getElementById("root"))},98:function(t,e,a){}},[[132,1,2]]]);
//# sourceMappingURL=main.d3784235.chunk.js.map